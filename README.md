Данное веб-приложение предназначено для отображения на веб-странице карты перекопов и объездов 
по г. Ижевску. На карте всегда должны быть актуальные данные и должен быть разработан функционал
для заполнения этой карты новыми данными.

Приложение разделено на клиентскую и серверную части. 
Клиентская часть является веб-страницей и отображается в браузере клиента, а серверная часть реализована на языке php и 
является промежуточными звеном между клиентская часть и базой данных FireBird. 
Клиентская часть представляет собой готовый интерфейс программирования приложений (API), который дает 
определенный набор HTTP-запросов, а также определение структуры HTTP-ответов, для выражения которых 
используется JSON формат.


### Разработка клиентской части

Клиентская сторона представляет из себя одностраничный сайт, т.е. все действия происходят на одной странице, 
перезагрузки страницы при каких либо действиях не происходит - связь с сервером осуществляется спомощью ajax-запросов.

Вся логика приложения написана на JavaScript'e. 
Для удобства работы с DOM элементами, используется JavaScript библиотека jQuery. Также она помогает проще обращаться к атрибутам и содержимому элементов DOM, и манипулировать ими. Также библиотека jQuery предоставляет удобный API для работы с AJAX.
Для удобства написания JavaScript используется CoffeeScript, который компилируется в JavaScript на этапе разработки.
В среднем для выполнения одинаковых действий на CoffeeScript требуется в 2 раза меньше строк, чем JavaScript. 
JavaScript код, который скомпилируется из CoffeeScript полностью проходит проверку JavaScript Lint.

Вся HTML разметка выполнена в виде Jade-шаблонов и также компилируется на этапе разработки. В качестве шаблонизатора на клиентской стороне использутеся EJS (Embedded JavaScript). Шаблонизатор на стороне браузера необходим для того, чтобы осуществлять рендеринг в HTML и отображать JSON ответы от сервера (например, при открытии балуна метки сначала делается запрос на получение данных от сервера, а затем осуществляется рендеринг этих данных и их отображение внутри открывшегося балуна).

Дизайн клиентской части сделан спомощью css-фреймворка bootstrap. Это свободный набор инструментов для создания сайтов и веб-приложений. Включает в себя HTML и CSS шаблоны оформления для типографики, веб-форм, кнопок, меток, блоков навигации и прочих компонентов веб-интерфейсов, включая JavaScript расширения.




### Система управления версиями

Система управления версиями — это программное обеспечение для облегчения работы с изменяющейся информацией. Она позволяет хранить несколько версий одного и того же документа, при необходимости возвращаться к более ранним версиям, определять, кто и когда сделал то или иное изменение, и многое другое.

Такие системы наиболее широко используются при разработке программного обеспечения для хранения исходных кодов разрабатываемой программы. Однако они могут с успехом применяться и в других областях, в которых ведётся работа с большим количеством непрерывно изменяющихся электронных документов. В частности, системы управления версиями применяются в САПР, обычно в составе систем управления данными об изделии (PDM). Управление версиями используется в инструментах конфигурационного управления (Software Configuration Management Tools).

Для данного проекта использовался Git - это наиболее популярная на сегодняшний день система управления версиями. Система спроектирована как набор программ, специально разработанных с учётом их использования в скриптах. Это позволяет удобно создавать специализированные системы контроля версий на базе Git или пользовательские интерфейсы. Например, Cogito является именно таким примером фронтенда к репозиториям Git, а StGit использует Git для управления коллекцией патчей. Git поддерживает быстрое разделение и слияние версий, включает инструменты для визуализации и навигации по нелинейной истории разработки. Как и Darcs, BitKeeper, Mercurial, Bazaar и Monotone, Git предоставляет каждому разработчику локальную копию всей истории разработки, изменения копируются из одного репозитория в другой. Удалённый доступ к репозиториям Git обеспечивается git-daemon, SSH- или HTTP-сервером. TCP-сервис git-daemon входит в дистрибутив Git и является наряду с SSH наиболее распространённым и надёжным методом доступа. Метод доступа по HTTP, несмотря на ряд ограничений, очень популярен в контролируемых сетях, потому что позволяет использовать существующие конфигурации сетевых фильтров.


### Сборка проекта

Для автоматизации процесса преобразования файлов из одной формы в другую и компоновки других файлов, в том числе компиляции jade-разметки и СoffeeScript скриптов используется программа make, ситема сборки Grunt.js, серверная платформа Node.js 
и пакетный менеджер NPM.

- NPM — это пакетный менеджер node.js. С его помощью можно управлять модулями и зависимостями. 
- Grunt — это инструмент для сборки javascript проектов из командной строки с использованием задач.
- Node или Node.js — серверная платформа, использующая язык программирования JavaScript, основанная на движке V8. Предназначена для создания масштабируемых распределённых сетевых приложений, таких как веб-сервер. В отличие от большинства программ JavaScript, этот каркас исполняется не в браузере клиента, а на стороне сервера.
- Make — утилита, автоматизирующая процесс преобразования файлов из одной формы в другую. Чаще всего это компиляция исходного кода в объектные файлы и последующая компоновка в исполняемые файлы или библиотеки. Утилита использует специальные make-файлы, в которых указаны зависимости файлов друг от друга и правила для их удовлетворения. На основе информации о времени последнего изменения каждого файла make определяет и запускает необходимые программы.

Для сборки проекта требуются следующие npm-пакеты:
- "grunt-cli": "~0.1.9"
- "grunt": "~0.4.1"
- "grunt-contrib-uglify": "~0.2.2"
- "grunt-contrib-coffee": "~0.7.0"
- "grunt-contrib-concat": "~0.3.0"
- "grunt-contrib-jade": "~0.7.0"
- "grunt-recess": "~0.3.3"




### Структура API для взаимодействия с базой данных.

#### Запросы для работы с объектами, которые отображаются на карте

- **Получение всех точек**
	- Параметры запроса:
		- action: getPoints
	- Ответ: массив данных точек со следующими полями: 
		- UUID, уникальный ID точки
		- POINJ, гSографические координаты точки
		- USER_ID, ID пользователя, который создал данную точку
		- VID_ID, тип точки
		- SVID, название типа точки
		- PLAN\_PERIOD\_END, планируемая дата окончания
		- STREET, улица, на которой расположен данный объект

- **Получение данных для определенной точки**
	- Параметры запроса:
		- action: getBalloonContent
		- uuid: уникальный ID точки
		- userid: ID учетной записи (_опционально_)
		- login: логин (_опционально_)
		- hash: хэш пароля (_опционально_)	
	- Ответ: массив данных по данному объекту

- **Запрос на изменение данных метки**
	- Параметры запроса:
		- action: saveMark
		- uuid: уникальный ID точки
		- agent: исполнитель
		- info: комментарий
		- date1: дата начала
		- date2: планируемая дата окончания
		- date3: дата окончания (_опционально_)
		- lat: широта
		- lon: долгота
		- vid: тип объекта (0 - перекоп, 1 - объезд)
		- userid: ID учетной записи
		- login: логин
		- hash: хэш пароля	
	- Ответ: boolean

- **Запрос на создание новой метки**
	- Параметры запроса:
		- action: createMark
		- agent: исполнитель
		- info: комментарий
		- date1: дата начала
		- date2: планируемая дата окончания
		- date3: дата окончания (_опционально_)
		- lat: широта
		- lon: долгота
		- vid: тип объекта (0 - перекоп, 1 - объезд)
		- userid: ID учетной записи
		- login: логин
		- hash: хэш пароля	
	- Ответ: boolean

- **Запрос на изменение координат метки**
	- Параметры запроса:
		- action: dragMark
		- uuid: уникальный ID точки
		- lat: широта
		- lon: долгота
		- userid: ID учетной записи
		- login: логин
		- hash: хэш пароля	
	- Ответ: boolean

- **Запрос на удаление метки**
	- Параметры запроса:
		- action: removeMark
		- uuid: уникальный ID точки
		- userid: ID учетной записи
		- login: логин
		- hash: хэш пароля	
	- Ответ: boolean

- **Получение списка исполнителей**
	- Параметры запроса:
		- action: getAgents
		- userid: ID учетной записи
		- login: логин
		- hash: хэш пароля	
	- Ответ: массив исполнителей


#### Запросы для авторизации

- **Авторизация**
	- Параметры запроса:
		- action: signin
		- login: логин
		- password: пароль (_опционально_)
		- hash: хэш пароля	(_если не указан пароль_)
	- Ответ: массив исполнителей







### Термины

[api](http://ru.wikipedia.org/wiki/API) 
> Интерфейс программирования приложений (иногда интерфейс прикладного программирования) - набор готовых классов, процедур, функций, структур и констант, предоставляемых приложением (библиотекой, сервисом) для использования во внешних программных продуктах. Используется программистами для написания всевозможных приложений.

[html](http://ru.wikipedia.org/wiki/Html)
> стандартный язык разметки документов во Всемирной паутине. Большинство веб-страниц создаются при помощи языка HTML (или XHTML). Язык HTML интерпретируется браузерами и отображается в виде документа в удобной для человека форме.

[DOM](http://ru.wikipedia.org/wiki/Document_Object_Model)
> это не зависящий от платформы и языка программный интерфейс, позволяющий программам и скриптам получить доступ к содержимому HTML, XHTML и XML-документов, а также изменять содержимое, структуру и оформление таких документов.

[CSS](http://ru.wikipedia.org/wiki/Css)
> формальный язык описания внешнего вида документа, написанного с использованием языка разметки.

[php](http://ru.wikipedia.org/wiki/Php)
> скриптовый язык программирования общего назначения, интенсивно применяемый для разработки веб-приложений. 

[javascript](http://ru.wikipedia.org/wiki/Javascript)
> прототипно-ориентированный сценарный язык программирования. Является диалектом языка ECMAScript.
JavaScript обычно используется как встраиваемый язык для программного доступа к объектам приложений. 
Наиболее широкое применение находит в браузерах как язык сценариев для придания интерактивности веб-страницам.

[coffeescript](http://ru.wikipedia.org/wiki/CoffeeScript)
> язык программирования, транслируемый в JavaScript. CoffeeScript добавляет синтаксический сахар в духе Ruby, Python, Haskell и Erlang для того, чтобы улучшить читаемость кода и уменьшить его размер.

[json](http://ru.wikipedia.org/wiki/JSON) 
> текстовый формат обмена данными, основанный на JavaScript и обычно используемый именно с этим языком. Как и многие другие текстовые форматы, JSON легко читается людьми.




